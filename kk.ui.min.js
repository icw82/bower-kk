kenzo.anchors=function(){var e={},t=document.querySelectorAll("a[href]");return e.add=function(e){try{var t=e.getAttribute("href").replace(/[\n\r\b\t]/g,""),n=document.querySelectorAll('a[href="'+t+'"]');e.addEventListener("mouseover",function(){each(n,function(e){e.classList.contains("hover")||e.classList.add("hover")})},!1),e.addEventListener("mouseout",function(){each(n,function(e){e.classList.contains("hover")&&e.classList.remove("hover")})},!1),e.addEventListener("mousedown",function(){each(n,function(e){e.classList.contains("pressed")||e.classList.add("pressed")})},!1),e.addEventListener("mouseup",function(){each(n,function(e){e.classList.contains("pressed")&&e.classList.remove("pressed")})},!1)}catch(o){console.warn(o)}},each(t,e.add),e}(),kenzo.tabs=function(){var e=[],t=[],n=[],o=function(o){if(!(o instanceof Element))return!1;var i=o.getAttribute("data-kenzo-tab-anchor"),s=o.getAttribute("data-kenzo-tab-group"),l=o.getAttribute("data-kenzo-tab-panel"),u=!1;""===s&&(s=null),i?(each(e,function(e){return i===e.name&&s===e.group?(u=!0,e.dom.push(o),!0):void 0}),u||e.push({name:i,group:s,dom:[o]}),o.kenzo_anchor_name=i,o.kenzo_group_name=s,o.addEventListener("click",r),o.classList.contains("current")&&(n.indexOf(s)>-1?o.classList.remove("current"):(n.push(s),a(i,s)))):l&&(each(t,function(e){return l===e.name&&s===e.group?(u=!0,e.dom.push(o),!0):void 0}),u||t.push({name:l,group:s,dom:[o]}))},r=function(t){var n=function(e){return e.getAttribute("data-kenzo-tab-anchor")?e:e.parentNode!==document.body?n(e.parentNode):void 0},o=n(t.target),r=o.kenzo_anchor_name,i=o.kenzo_group_name;return o instanceof Element&&!o.classList.contains("current")?(each(e,function(e){e.group===i&&(e.name===r?each(e.dom,function(e){e.classList.add("current")}):each(e.dom,function(e){e.classList.remove("current")}))}),void a(r,i)):!1},a=function(e,n){return"string"!=typeof e?!1:("string"!=typeof n&&(n=null),each(t,function(t){t.group===n&&(t.name===e?each(t.dom,function(e){e.classList.add("current")}):each(t.dom,function(e){e.classList.remove("current")}))}),void kenzo.generate.resize())};return each("[data-kenzo-tab-panel]",o),each("[data-kenzo-tab-anchor]",o),{add:o,show:a}}(),kenzo.popup=function(){if(!kenzo.toplayer)return!1;var e=kenzo.toplayer.get_popup_layer(),t=[],n=[],o=!1,r={mutex:!1,modal:!1,close_on_blur:!0,width:{value:320,units:"px"},height:{value:null,units:"auto"},rel:{x:"anchor",y:"anchor"},pos:{x:"center",y:"top"}};if(!(e instanceof Element))return!1;var a=function(e,t,n){var o=e.getAttribute(t);return"undefined"==typeof n&&(n=!1),"true"===o?!0:"false"===o?!1:n||!1},i=function(e,t){var n={},o=e.getAttribute(t);if(null===o)return null;if(n.value=o.match(/([\d]+\.[\d]+|[\d]+)%/),null!==n.value)n.units="%";else{if(n.value=o.match(/(\d+)/),null===n.value)return null;n.units="px"}return n.value=parseFloat(n.value[1]),n},s=function(e){var t={},n=["wrapper","anchor","window"],o=e.getAttribute("data-rel-x"),a=e.getAttribute("data-rel-y");if(null!==o&&-1===n.indexOf(o)&&(o=null),null!==a&&-1===n.indexOf(a)&&(a=null),!o||!a){var i=e.getAttribute("data-rel");null!==i&&(i=i.replace(/,+/g," ").replace(/\s{2,}/g," ").split(" "),1===i.length&&(i[1]=i[0]),-1===n.indexOf(i[0])&&(i[0]=null),-1===n.indexOf(i[1])&&(i[1]=null))}if(t.x=o||(i?i[0]:null),t.y=a||(i?i[1]:null),!t.x){var s=e.getAttribute("data-kenzo-option-left");null!==s&&("true"===s?t.x="anchor":"false"===s&&(t.x="wrapper"))}if(!t.y){var l=e.getAttribute("data-kenzo-option-top");null!==l&&("true"===l?t.y="anchor":"false"===l&&(t.y="wrapper"))}return t.x||(t.x=r.rel.x),t.y||(t.y=r.rel.y),t},l=function(e){var t={},n=["left","center","right"],o=["top","center","bottom"],a=e.getAttribute("data-pos-x"),i=e.getAttribute("data-pos-y");if(null!==a&&-1===n.indexOf(a)&&(a=null),null!==i&&-1===o.indexOf(i)&&(i=null),!a||!i){var s=e.getAttribute("data-pos");null!==s&&(s=s.replace(/,+/g," ").replace(/\s{2,}/g," ").split(" "),1===s.length&&(s[1]=s[0]),-1===n.indexOf(s[0])&&(s[0]=null),-1===o.indexOf(s[1])&&(s[1]=null))}return t.x=a||(s?s[0]:null),t.y=i||(s?s[1]:null),t.x||(t.x=r.pos.x),t.y||(t.y=r.pos.y),t},u=function(e){var t={};return t.mutex=function(){var t=e.getAttribute("data-kenzo-option-mutex");return t?(t=t.replace(/,+/g," ").replace(/\s{2,}/g," "),t.split(" ")):void 0}(),t.modal=a(e,"data-modal",r.modal),t.close_on_blur=a(e,"data-close-on-blur",r.close_on_blur),t.width=i(e,"data-width"),t.height=i(e,"data-height"),t.rel=s(e),t.pos=l(e),t.temp_center=a(e,"data-temp-center",!1),t.temp_center&&(t.rel.x="window",t.rel.y="window"),t},c=function(e,t){var n={name:e,dom:t,show:!1,anchor:null,anchor_clones:[],anchor_clones_wrapper:t.querySelector('[data-kenzo-popup-anchor-clone="'+e+'"]'),pointer:function(){return t.querySelector('[data-kenzo-popup-pointer="'+e+'"]')}(),options:u(t),update:{width:!0,height:!0}};return n},d=function(n){var o=n.getAttribute("data-kenzo-popup-panel");""!==o&&each(t,function(e){return e.name===o?(console.warn("Две или более одноимённых панелей:",o),!0):void 0},function(){t.push(c(o,n))}),e.appendChild(n)},p=function(){var e,n,o;return"string"==typeof arguments[0]?n=arguments[0]:arguments[0]instanceof Element&&(o=arguments[0],n=o.getAttribute("data-kenzo-popup-anchor")||o.getAttribute("data-kenzo-popup-close")||o.getAttribute("data-kenzo-popup-close-button")),n&&""!==n?(each(t,function(t){return t.name===n?(e=t,!0):void 0}),e):e},f=function(e){var t={width:e.options.width,height:e.options.height};e.update.width&&t.width&&t.width.value>0&&(e.dom.style.width=t.width.value+t.width.units,e.update.width=!1),e.update.height&&t.height&&t.height.value>0&&("px"===t.height.units?(e.dom.style.height=t.height.value+t.height.units,e.update.height=!1):"%"===t.height.units&&(e.dom.style.height=getWindowParams().h/100*t.height.value+"px"))},h=function(t){var n=e.getBoundingClientRect(),o={width:t.options.width,height:t.options.height,rel:t.options.rel,pos:t.options.pos};if(t.anchor instanceof Element)var r=t.anchor.getOffset();if(o.width&&o.width.value>0&&t.dom.classList.contains("std")&&(t.dom.style.marginLeft=-Math.round(o.width.value/2)+o.width.units),t.options.temp_center){var a=getWindowParams().y,i=getWindowParams().h;t.dom.style.left="50%",t.dom.style.top=a+(i-t.dom.offsetHeight)/2+"px"}if("anchor"===o.rel.x&&r){var s=r.left-n.left+r.width/2;t.dom.style.left=s+"px";var l=t.dom.getBoundingClientRect().left-n.left;l+t.dom.offsetWidth>n.width-10?(t.dom.style.removeProperty("left"),t.dom.style.right="10px"):10>l&&(t.dom.style.left=Math.round(t.dom.offsetWidth/2)+10+"px")}if("anchor"===o.rel.y&&r){var u=r.top+r.height;t.dom.style.top=u+"px"}},m=function(e){var t=e.dom.getOffset();if(e.anchor instanceof Element)var n=e.anchor.getOffset();n&&(e.pointer&&(e.pointer.style.left=n.left+n.width/2-t.left+"px"),e.anchor_clones_wrapper&&(e.anchor_clones_wrapper.style.left=n.left-t.left+"px",e.anchor_clones_wrapper.style.top=n.top-t.top+"px"))},v=function(){each(n,function(e){return e.show?(f(e),h(e),void m(e)):!1})};window.addEventListener("resize",v,!0);var g=function(){var e,t,r=p(arguments[0]),a=!0;if(!r)return!1;if(arguments[0]instanceof Element?arguments[0]!==r.dom&&(e=arguments[0]):arguments[1]instanceof Element?(e=arguments[1],"boolean"==typeof arguments[2]&&(a=arguments[2])):"boolean"==typeof arguments[1]&&(a=arguments[1]),o=!0,r.options.mutex instanceof Array&&(r.options.mutex.indexOf("all")>-1?each(n,function(e){b(e.name)}):each(r.options.mutex,function(e){b(e)})),e&&(r.anchor=e,r.anchor_clones_wrapper)){if(t=null,each(r.anchor_clones,function(e){e.original===r.anchor?t=e.dom:e.dom.style.display="none"}),!t){var t=e.cloneNode(!0);t=w(e,r.name).clone}t.style.removeProperty("display"),t.classList.remove("active")}r.options.modal===!0&&kenzo.toplayer.show(!0),r.dom.classList.add("visible"),r.show=!0,each(n,function(e){return e==r?!0:void 0},function(){n.push(r)}),v();var i=r.dom.querySelector("input, textarea");i instanceof Element&&i.focus(),a&&t&&t.classList.add("active"),a&&e&&e.classList.add("active")},b=function(){var e=p(arguments[0]),t=arguments[1];return"boolean"!=typeof t&&(t=!1),e&&e.show?!e.options.close_on_blur&&t?!1:(e.anchor&&(e.anchor.classList.remove("active"),e.anchor=null),e.dom.classList.remove("visible"),e.show=!1,e.options.modal===!0&&kenzo.toplayer.hide(),void each(n,function(t,o){t==e&&n.splice(o,1)})):!1},w=function(e){if(arguments[0]instanceof Element)var t=p(arguments[0]);if("string"==typeof arguments[1])var n=p(arguments[1]);if(!t)return!1;var o,r=function(){t.show===!1||t.anchor!==e?g(e):b(e)};if("kz-initiated"in e||(e.addEventListener("click",r),e["kz-initiated"]=!0),t.anchor_clones_wrapper){o=e.cloneNode(!0);var a={original:e,dom:o};n?(n.anchor_clones.push(a),n.anchor_clones_wrapper.appendChild(o)):(t.anchor_clones.push(a),t.anchor_clones_wrapper.appendChild(o)),o.addEventListener("click",r)}return{anchor:e,clone:o}};each("[data-kenzo-popup-panel]",d),each("[data-kenzo-popup-anchor]",function(e,t){if("undefined"==typeof e.classList&&e instanceof SVGSVGElement){var n=document.createElement("span");e.parentNode.insertBefore(n,e),n.appendChild(e),n.setAttribute("data-kenzo-popup-anchor",e.getAttribute("data-kenzo-popup-anchor")),w(n,t)}else w(e,t)}),each("[data-kenzo-popup-conductor]",function(e){var t=e.getAttribute("data-kenzo-popup-conductor");if(""===t)t=null;else{var n=p(t);if(!n)return!1}var o,r=function(e){if(o===document.body)return!1;if(t){if(e.parentNode==document.body)return console.warn("kenzo.popup: Якорь не найден"),!1;o=e.parentNode.querySelector('[data-kenzo-popup-anchor="'+t+'"]')}else o=e.parentNode.querySelector("[data-kenzo-popup-anchor]");o||r(e.parentNode)};r(e),e.addEventListener("click",function(){o.click()})}),each("[data-kenzo-popup-close], [data-kenzo-popup-close-button]",function(e){e.addEventListener("click",function(){b(e)})});var y=function(e){return e instanceof Element?e===document.body?!1:e.hasAttribute("data-kenzo-popup-panel")||e.hasAttribute("data-kenzo-popup-anchor")||e.hasAttribute("data-kenzo-popup-conductor")?!0:e.parentNode!==document.body?y(e.parentNode):!1:e instanceof SVGElementInstance?y(e.correspondingUseElement):void 0};return document.addEventListener("click",function(e){if(o)return o=!1,!1;if(n.length>0&&!y(e.target)){var t=n.length;for(t;t>0;t--)b(n[0].name,!0)}}),{get:p,show:g,hide:b}}(),kenzo.slider=function(){var e=[],t={flipspeed:.4,autoflip:null,base_width:null,distribution:null,user_pause:30},n=function(n){if(!(n instanceof Element&&n.classList.contains("kenzo-slider")))return!1;var u=n.querySelector(".kenzo-slider__frame");if(null===u)return console.warn("Отсутсвует рамка",n),!1;var c=u.querySelector(".kenzo-slider__container");if(null===c)return console.warn("Отсутсвует контейнер",n),!1;var d=c.querySelectorAll(".kenzo-slider__item");if(!kenzo.is_nodes(d))return console.warn("Отсутсвуют элементы",n),!1;var p=[],f={prev:n.querySelector(".kenzo-slider__prev"),next:n.querySelector(".kenzo-slider__next"),indicators:n.querySelectorAll(".kenzo-slider__indicator")},h={flipspeed:parseFloat(n.getAttribute("data-flipspeed"))||t.flipspeed,autoflip:parseFloat(n.getAttribute("data-autoflip"))||t.autoflip,base_width:parseInt(n.getAttribute("data-base-width"))||t.base_width,distribution:parseInt(n.getAttribute("data-distribution"))||t.distribution},m=function(){var e=n.getAttribute("data-options");return"string"==typeof e&&""!==e&&(e=e.replace(/(?:^|\s)([^_a-zA-Z][\w\-]*)/g,"").trim(),e=e.split(" ").sort()),e instanceof Array||(e=[]),e}();if(h.distribution>0){for(var v=document.createDocumentFragment(),g=Math.ceil(d.length/h.distribution),b=0;g>b;b++){var w=document.createElement("div");w.classList.add("kenzo-slider__slide");for(var y=b*h.distribution;y<(b+1)*h.distribution&&y<d.length;y++)w.appendChild(d[y]);p.push(w),v.appendChild(w)}c.appendChild(v)}else{if(!(h.base_width>0))return console.warn("kenzo.slider:","Cледует указать либо базовую ширину, либо количество элементов в слайде."),!1;var k=0,z=[],v=document.createDocumentFragment();each(d,function(e,t){if(z.push(e),k+=e.offsetWidth,t+1===d.length||k+d[t+1].offsetWidth>h.base_width){var n=k/h.base_width,o=document.createElement("div");o.classList.add("kenzo-slider__slide"),.85>n&&(k=Math.round(.95*h.base_width)),each(z,function(e){e.style.width=Math.floor(e.offsetWidth/k*1e4)/100+"%",o.appendChild(e)}),z=[],k=0,p.push(o),v.appendChild(o)}}),c.appendChild(v)}if(kenzo.is_nodes(f.indicators)){for(var _=p.length;_<f.indicators.length;_++)f.indicators[_].parentNode.removeChild(f.indicators[_]);for(var v=document.createDocumentFragment(),_=f.indicators.length;_<p.length;_++)v.appendChild(f.indicators[0].cloneNode());f.indicators[0].parentNode.appendChild(v),f.indicators=n.parentNode.querySelectorAll(".kenzo-slider__indicator")}else f.indicators=null;e.push({dom:n,frame:u,container:c,slides:p,items:d,controls:f,settings:h,options:m,width:null,height:null,current:null});var L=e.length-1;o(e[L],0),n.classList.add("activated"),i(e[L]),s(e[L]),window.addEventListener("resize",function(){l(e[L])}),f.next instanceof Element&&f.next.addEventListener("click",function(){r(e[L],"user")}),f.prev instanceof Element&&f.prev.addEventListener("click",function(){a(e[L],"user")}),each(f.indicators,function(t,n){t.addEventListener("click",function(){o(e[L],n,"user")})}),each(p,function(t,n){t.addEventListener("click",function(){o(e[L],n,"user")})})},o=function(e,n,o){"user"==o&&e.settings.flip_interval>0&&(clearInterval(e.settings.flip_interval),setTimeout(function(){i(e)},1e3*t.user_pause));var r=!1;e.current!==n&&(e.current=n,r=!0),r&&l(e)},r=function(e,t){null!==e.current&&e.current+1<e.slides.length?o(e,e.current+1,t):o(e,0,t)},a=function(e,t){null!==e.current&&e.current-1>=0?o(e,e.current-1,t):o(e,e.slides.length-1,t)},i=function(e){e.settings.autoflip>0&&(clearInterval(e.settings.flip_interval),e.settings.flip_interval=setInterval(function(){r(e)},1e3*e.settings.autoflip))},s=function(e){("normal"===kenzo.browser||"webkit"===kenzo.browser)&&(e.container.style.transitionDuration=e.settings.flipspeed+"s",e.container.style.transitionTimingFunction="ease",e.container.style.transitionProperty="normal"===kenzo.browser?"transform":"webkit"===kenzo.browser?"-webkit-transform":"left")},l=function(e){if(null===e.current)return!1;e.width=e.frame.offsetWidth,each(e.slides,function(t){t.style.width=e.width+"px"}),e.height=e.slides[e.current].offsetHeight,e.container.style.width=e.width*e.slides.length+"px",e.frame.style.height=e.height+"px",e.options.indexOf("proportional-font-size")>-1&&e.settings.base_width>0&&(e.frame.style.fontSize=e.width/e.settings.base_width+"em"),kenzo.is_nodes(e.controls.indicators)&&each(e.controls.indicators,function(t,n){n===e.current?t.classList.add("current"):t.classList.remove("current")});var t=-e.width*e.current+"px",n="translate3d("+t+", 0px, 0px)";"normal"==kenzo.browser?e.container.style.transform=n:"webkit"==kenzo.browser?e.container.style.webkitTransform=n:e.container.style.left=t,each(e.slides,function(t,n){n===e.current?t.classList.add("current"):t.classList.remove("current")})};return{add:n}}(),kenzo.scroller=function(){var e,t,n,o,r=[],a=function(e){return e.classList.contains("kenzo-scroll-bar")?e:e.parentNode!==document.body?a(e.parentNode):void 0},i=function(r){if(null!==e&&null!==t){if(null===o){o=r.clientX;var a=0}else{var a=o-r.clientX;o=r.clientX}var i=t.querySelector(".kenzo-scroll-thumb");e.pos||(e.pos=0),e.pos="proportional"==n?(i.offsetLeft-a)/(t.offsetWidth-i.offsetWidth):(e.pos*t.offsetWidth-a)/(t.offsetWidth-i.offsetWidth),e.pos>1?e.pos=1:e.pos<0&&(e.pos=0)}else s();r.preventDefault(),u(e)},s=function(){null!==e&&(e=null,t=null,n=null,o=null,document.removeEventListener("mousemove",i,!0))};document.addEventListener("mouseup",s);var l=function(o){if(!(o instanceof Element))return!1;var s=o.getAttribute("data-name");if(null===s)return!1;if(o.classList.contains("kenzo-scroll-content"))each(r,function(e){return e.name===s?(e.content.dom=o,!0):void 0},function(){r.push({name:s,pos:0,content:{dom:o},bars:[]})});else if(o.classList.contains("kenzo-scroll-bar")){var l,u=o.querySelector(".kenzo-scroll-thumb"),c=o.getAttribute("data-type");if(each(r,function(e,t){return e.name===s?(e.bars.push({dom:o,type:c,thumb:{dom:u}}),l=t,!0):void 0},function(){return u instanceof Element?(r.push({name:s,pos:0,content:{dom:null},bars:[{dom:o,type:c,thumb:{dom:u}}]}),void(l=r.length-1)):!1}),null===l)return!1;each(r[l].bars,function(o){o.thumb.dom.addEventListener("mousedown",function(s){s.preventDefault(),e=r[l],t=a(s.target),n=o.type,document.addEventListener("mousemove",i,!0)},!0)})}},u=function(){each(r,function(){var e=(arguments[0].name,arguments[0].pos),t=arguments[0].content,n=arguments[0].bars;if(!(t.dom instanceof Element&&n.length>0))return!1;if(t.dom.scrollWidth>t.dom.offsetWidth)var o=!0;else var o=!1;o?0===e?(t.dom.classList.remove("left"),t.dom.classList.add("right")):1===e?(t.dom.classList.add("left"),t.dom.classList.remove("right")):(t.dom.classList.add("left"),t.dom.classList.add("right")):(t.dom.classList.remove("left"),t.dom.classList.remove("right")),each(n,function(t){o?(t.dom.classList.remove("hidden"),t.thumb.width="proportional"==t.type?372:0,t.thumb.dom.style.width=t.thumb.width+"px",t.thumb.dom.style.left=Math.round((t.dom.offsetWidth-t.thumb.width)*e)+"px"):t.dom.classList.add("hidden")}),t.dom.scrollLeft=Math.round((t.dom.scrollWidth-t.dom.offsetWidth)*e)})};return each(".kenzo-scroll-content",l),each(".kenzo-scroll-bar",l),u(),window.addEventListener("resize",u),{add:l,update:u}}();
//# sourceMappingURL=kk.ui.min.js.map