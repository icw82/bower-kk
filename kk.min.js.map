{"version":3,"sources":["base.js","1-each.js","2-rand.js","class.js","class_forever.js","event.js","find_ancestor.js","format.js","generate_key.js","get_buffer.js","get_offset.js","get_window_params.js","i8.js","is_node.js","ls.js","plural.js"],"names":["root","cons","console","kenzo","v","w","d","_o","_f","_u","_s","_n","_A","Array","__a","error","__d","warn","window","Window","global","document","Element","_E","Node","_N","NodeList","_NL","kk","ts","time","Date","getTime","module","exports","r","each","array","callback","reverse","def","index","args","arguments","nothing","querySelectorAll","Math","floor","length","rand","min","max","random","depth","pow","element","classes","mask","abort","c","indexOf","classList","remove","add","class_forever","class_name","mo","MutationObserver","mutations","mr","attributeName","target","contains","observe","attributes","event","_","create_event","createEvent","resize","delay","initEvent","dispatchEvent","stop","originalEvent","preventDefault","stopPropagation","cancelBubble","find_ancestor","descendant","distance","parentNode","this","format","number","string","delimiter","numbers","String","split","item","i","phone","replace","match","slice","generate_key","key","fromCharCode","get_ranges","response","separator","view","Uint8Array","ranges","cur","byteLength","charCodeAt","end","push","headers","begin","get_parts","headers_array","j","getHeader","header","regexp","RegExp","matches","content","get_buffer","url","xhr","XMLHttpRequest","open","setRequestHeader","onreadystatechange","readyState","status","self","getAllResponseHeaders","getResponseHeader","forEach","join","range","out","parts","responseType","send","get_offset","boundingClientRect","getBoundingClientRect","top","pageYOffset","left","pageXOffset","width","height","get_window_params","doc","doc_elem","documentElement","sizes","x","body","scrollLeft","y","scrollTop","innerWidth","clientWidth","h","innerHeight","clientHeight","i8to2","int8","toString","i8ArrayTo2","i8ArrayToString","is_nodes","arg","StaticNodeList","ls","localStorage","ls_get","getItem","ls_set","setItem","create","JSON","stringify","get","address","parse","update","data","plural","amount","singular","paucal","fr","lang","langs","first","second"],"mappings":"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","file":"kk.min.js","sourcesContent":["(function() {\n'use strict';\n\nvar root,\n    cons = console,\n    kenzo = {\n        v: '3.0.0',\n        w: false, // window (global if not)\n        d: false, // root.document\n        _o: 'object',\n        _f: 'function',\n        _u: 'undefined',\n        _s: 'string',\n        _n: 'number',\n        _A: Array,\n        __a: function() {cons.error('Некорректные аргументы')},\n        __d: function() {cons.warn('Depricated')}\n    };\n\nif (typeof window == kenzo._o &&\n    (typeof Window == kenzo._f || typeof Window == kenzo._o) && (window instanceof Window)) {\n    root = window;\n    kenzo.w = true;\n} else if (typeof global == kenzo._o) {\n    root = global;\n}\n\nif (typeof root.document == kenzo._o)\n    kenzo.d = true;\n\nif (typeof Element == kenzo._f || typeof Element == kenzo._o)\n    kenzo._E = Element;\n\nif (typeof Node == kenzo._f || typeof Node == kenzo._o)\n    kenzo._N = Node;\n\nif (typeof NodeList == kenzo._f || typeof NodeList == kenzo._o)\n    kenzo._NL = NodeList;\n\nroot.kenzo = root.kk = kenzo;\n\nkenzo.ts = function() {\n    var time = new Date();\n    return time.getTime();\n}\n\nif (typeof module == kenzo._o && typeof module.exports == kenzo._o) {\n    // FUTURE: запилить для ноды\n    module.exports = kenzo;\n}\n\nkenzo.r = root;\n\n// end ————————————————————————————————————————————————————————————————————————————————————— 100 ——|\n}());\n","// Перебор массива\n// Если обратная функция возвращает true, перебор прерывается.\n// Если третий аргумент функция — то она выполяется после перебора массива,\n//     если обратная функция ниразу не возвращала true\n// Если последний элемент === true, перебор производится в обратном порядке.\nkk.each = function(array, callback) {\n    var kenzo = kk,\n        args = arguments,\n        reverse,\n        def,\n        nothing = true,\n        index;\n\n//    console.log('**', array instanceof MutationRecord);\n\n    if (typeof array === kenzo._s && kenzo.d)\n        array = document.querySelectorAll(array);\n    else if (typeof array === kenzo._n)\n        array = Array(Math.floor(array));\n\n    if (typeof args[2] == kenzo._f) {\n        def = args[2];\n        if (args[3] === true)\n            reverse = true;\n    } else if (args[2] === true) {\n        reverse = true;\n    }\n\n    if (\n        ((array instanceof kenzo._A) || (array instanceof kenzo._NL)) &&\n        typeof callback == kenzo._f\n    ) {\n        if (reverse) {\n            for (index = array.length - 1; index >= 0; index--) {\n                if (callback(array[index], index) === true) {\n                    nothing = false;\n                    break;\n                }\n            }\n        } else {\n            for (index = 0; index < array.length; index++) {\n                if (callback(array[index], index) === true) {\n                    nothing = false;\n                    break;\n                }\n            }\n        }\n\n        if (nothing && typeof def == kenzo._f) {\n            def();\n        }\n    } else if (typeof def == kenzo._f) {\n        def();\n    }\n};\n\nif (typeof kk.r.each === kenzo._u)\n    kk.r.each = kk.each;\n","/**\n * Случайное целое число\n * param {Number} Минимальное значение или разрядность слуайного числа,\n *     если не указан второй аргумент\n * param {Number} Максимальное значение\n * @returns {Number} Случайное число из заданного диапазона\n */\nkk.rand = function() {\n    var kenzo = kk,\n        args = arguments,\n        min,\n        max;\n\n    if (typeof args[0] == kenzo._n) {\n        if (typeof args[1] == kenzo._n) {\n            min = args[0];\n            max = args[1] + 1;\n\n            return Math.floor( Math.random() * (max - min) ) + min;\n        } else {\n            var depth = args[0];\n\n            if (depth < 0)\n                depth = -depth;\n\n            if (depth < 16) {\n                depth = Math.floor(depth);\n\n                if (depth === 0)\n                    return 0;\n                else if (depth === 1)\n                    min = 0;\n                else\n                    min = Math.pow(10, depth - 1);\n\n                return kenzo.rand(min, Math.pow(10, depth) - 1);\n\n            } else\n                kenzo.__a();\n        }\n    } else // TODO: boolian если нет аргументов\n        kenzo.__a();\n};\n","kk.class = function(element, classes, mask) {\n    var kenzo = kk,\n        each = kenzo.each,\n        abort;\n\n    if (element instanceof kenzo._E) {\n        if (typeof classes == kenzo._s)\n            classes = [classes];\n\n        each (classes, function(c) {\n            if (typeof c != kenzo._s) {\n                abort = true;\n                return true;\n            }\n        });\n\n        if (!abort && classes instanceof kenzo._A) {\n            if (typeof mask == kenzo._u)\n                mask = [];\n\n            if (mask instanceof kenzo._A) {\n                each (mask, function(c) {\n                    if (typeof c != kenzo._s) {\n                        abort = true;\n                        return true;\n                    }\n                });\n\n                if (!abort) {\n                    each (mask, function(c) {\n                        if (classes.indexOf(c) < 0) {\n                            element.classList.remove(c);\n                        }\n                    });\n\n                    each (classes, function(c) {\n                        element.classList.add(c);\n                    });\n\n                    return true;\n                } else\n                    kenzo.__a();\n            } else\n                kenzo.__a();\n        } else\n            kenzo.__a();\n    } else\n        kenzo.__a();\n}\n","kk.class_forever = function(class_name, element){\r\n    element.classList.add(class_name);\r\n\r\n    var mo = new MutationObserver(function(mutations){\r\n        each (mutations, function(mr){\r\n            if (\r\n                (mr.attributeName == 'class') &&\r\n                (mr.target == element) &&\r\n                !element.classList.contains(class_name)\r\n            ){\r\n                element.classList.add(class_name);\r\n            }\r\n        });\r\n    });\r\n\r\n    mo.observe(element, {attributes: true /*MutationObserverInit*/});\r\n    //mo.disconnect();\r\n}\r\n","kk.event = (function() {\r\n    var _ = {},\r\n        create_event = document.createEvent;\r\n\r\n    _.resize = function(delay) {\r\n        if (typeof create_event == kk._f) {\r\n            var event = create_event('Event');\r\n            event.initEvent('resize', true, true);\r\n            window.dispatchEvent(event);\r\n        }\r\n    }\r\n\r\n    _.stop = function(event) {\r\n        event = event || window.event;\r\n\r\n        if (!event)\r\n            return false;\r\n\r\n        while (event.originalEvent) {\r\n            event = event.originalEvent\r\n        }\r\n\r\n        if (event.preventDefault)\r\n            event.preventDefault();\r\n        if (event.stopPropagation)\r\n            event.stopPropagation();\r\n\r\n        event.cancelBubble = true;\r\n\r\n        return false;\r\n    }\r\n\r\n    return _;\r\n\r\n})();\r\n","kk.find_ancestor = function(descendant, class_name, distance) {\r\n    if (typeof distance === 'number') {\r\n        if (distance <= 0) return false;\r\n        distance--;\r\n    }\r\n\r\n    if (!(descendant instanceof Element)) return false;\r\n    if (!('parentNode' in descendant)) return false;\r\n    if (!(descendant.parentNode instanceof Element)) return false;\r\n\r\n    if (descendant.parentNode.classList.contains(class_name))\r\n        return descendant.parentNode;\r\n    else\r\n        return this.find_ancestor(descendant.parentNode, class_name, distance);\r\n}\r\n","kk.format = (function() {\r\n    var each = kk.each,\r\n        _ = {};\r\n\r\n    _.number = function(string) {\r\n        var _ = '',\r\n            delimiter = ' ';\r\n\r\n        if (string && string != '') {\r\n            var numbers = String(string);\r\n            numbers = numbers.split('');\r\n\r\n            each (numbers.length, function(item, i) {\r\n                _ = numbers[i] + _;\r\n\r\n                if (i !== 0 && (numbers.length - i) % 3 === 0) {\r\n                    _ = delimiter + _;\r\n                }\r\n\r\n            }, true);\r\n        }\r\n\r\n        return _;\r\n    }\r\n\r\n    // Российские номера\r\n    // TODO: не только российские\r\n    _.phone = function() {\r\n        if (arguments.length === 0)\r\n            return false;\r\n\r\n        if (typeof arguments[0] !== 'string')\r\n            return false;\r\n\r\n        var string = arguments[0],\r\n            number = string\r\n                .replace(/[^\\d]/g, '')\r\n                .match(/^(?:7|8)([\\d]{10})/);\r\n\r\n        if (number === null)\r\n            return false;\r\n\r\n        number = number[1];\r\n\r\n        return '+7 ('\r\n            + number.slice(0, 3) + ') '\r\n            + number.slice(3, 6) + '-'\r\n            + number.slice(6, 8) + '-'\r\n            + number.slice(8, 10);\r\n    }\r\n\r\n    return _;\r\n})();\r\n\r\n//kenzo.num_to_ru = function(n) {\r\n//    if (typeof n == 'number')\r\n//        return n.toString().replace(/\\./,',');\r\n//    if (typeof n == 'string')\r\n//        return n.replace(/\\./,',');\r\n//}\r\n","kk.generate_key = function(length) {\r\n    if (typeof length !== 'number') {\r\n        length = 1;\r\n        console.warn('generate_key 1');\r\n    }\r\n\r\n    if (length < 1) {\r\n        length = 1;\r\n        console.warn('generate_key 2');\r\n    }\r\n\r\n    var key = '';\r\n\r\n    each (length, function() {\r\n        key += String.fromCharCode(kk.rand(19968, 40869));\r\n    });\r\n\r\n    return key;\r\n};\r\n","(function(kk){\r\n'use strict';\r\n\r\nfunction get_ranges(response, separator){\r\n    var view = new Uint8Array(response),\r\n        ranges = [],\r\n        cur = 0;\r\n    // — — — — — — — — — — — — — — — indian Magic (рождённое в муках)\r\n    // Поиск начала данных раздела\r\n    while (cur < response.byteLength){\r\n        if ((view[cur] === 45) && (view[cur + 1] === 45)){\r\n            cur += 2;\r\n\r\n            for (var i = 0; i < separator.length; i++){\r\n                if (separator.charCodeAt(i) === view[cur]){\r\n                    if (i == separator.length - 1){\r\n                        cur++;\r\n                        // Если после разделителя идёт перенос\r\n                        if (view[cur] === 13 && view[cur + 1] === 10){\r\n                            cur += 2;\r\n                            if (ranges.length > 0){\r\n                                ranges[ranges.length - 1].end = cur - separator.length - 6;\r\n                            }\r\n\r\n                            ranges.push({headers: cur});\r\n\r\n                            while (\r\n                                cur < response.byteLength &&\r\n                                !(view[cur + 2] === 45 && view[cur + 3] === 45)\r\n                            ){\r\n                                if (\r\n                                    view[cur] === 13 && view[cur + 1] === 10 &&\r\n                                    view[cur + 2] === 13 && view[cur + 3] === 10\r\n                                ){\r\n                                    cur += 4;\r\n                                    break;\r\n                                } else {\r\n                                    cur++;\r\n                                }\r\n                            }\r\n\r\n                            if (cur !== response.byteLength - 1)\r\n                                ranges[ranges.length - 1].begin = cur;\r\n\r\n                        } else if (view[cur] === 45 && view[cur + 1] === 45){\r\n                            // Последние два дефиса\r\n                            ranges[ranges.length - 1].end = cur - separator.length - 4;\r\n                        }\r\n                    }\r\n                } else {\r\n                    break;\r\n                }\r\n\r\n                cur++;\r\n            }\r\n        } else {\r\n            cur++;\r\n        }\r\n    }\r\n    // — — — — — — — — — — — — — — —\r\n\r\n    return ranges;\r\n}\r\n\r\nfunction get_parts(response, separator){\r\n    var _ = [],\r\n        ranges = get_ranges(response, separator)\r\n\r\n    for (var i = 0; i < ranges.length; i++){\r\n        var headers = '',\r\n            headers_array = new Uint8Array(\r\n                response,\r\n                ranges[i].headers,\r\n                ranges[i].begin - 4 - ranges[i].headers\r\n            );\r\n\r\n        for (var j = 0; j < headers_array.length; j++){\r\n            headers += String.fromCharCode(headers_array[j]);\r\n        }\r\n\r\n        _.push({\r\n            'headers': headers,\r\n            'getHeader': function(header){\r\n                var regexp = new RegExp(header + ': (.+)'),\r\n                    matches = this.headers.match(regexp);\r\n\r\n                return matches[1];\r\n            },\r\n            'content': response.slice(ranges[i].begin, ranges[i].end)\r\n        });\r\n    }\r\n\r\n    return _;\r\n};\r\n\r\n\r\nkk.get_buffer = function(/* String url [, Array range], Function callback */) {\r\n    // Проверка\r\n    if (typeof arguments[0] !== 'string'){\r\n        console.warn('KZ: url не передан');\r\n        return false;\r\n    } else\r\n        var url = arguments[0];\r\n\r\n    if (arguments[1]){\r\n        if (typeof arguments[1] == 'function'){\r\n            var callback = arguments[1];\r\n        } else if (arguments[1] instanceof Array){\r\n            if (arguments[1][0] instanceof Array)\r\n                var ranges = arguments[1];\r\n            else\r\n                var ranges = [arguments[1]];\r\n\r\n            if (typeof arguments[2] == 'function')\r\n                var callback = arguments[2];\r\n            else {\r\n                console.warn('KZ: Функция обратного вызова не передана');\r\n                return false;\r\n            }\r\n        } else {\r\n            console.warn('KZ: Второй аргумент не передан');\r\n            return false;\r\n        }\r\n    }\r\n\r\n    var xhr = new XMLHttpRequest();\r\n    xhr.open('GET', url, true);\r\n\r\n    if (!ranges) {\r\n    // Передача файла полностью\r\n\r\n    } else if (ranges.length === 1){\r\n    // Передача одной части файла\r\n        if (ranges[0][0] < 0)\r\n            xhr.setRequestHeader('Range', 'bytes=' + ranges[0][0]);\r\n        else\r\n            xhr.setRequestHeader('Range', 'bytes=' + ranges[0][0] + '-' + ranges[0][1]);\r\n\r\n        xhr.onreadystatechange = function(){\r\n            if (xhr.readyState !== 4) return false;\r\n            if (xhr.status === 206){\r\n                var self = this;\r\n                callback([{\r\n                    'headers': self.getAllResponseHeaders(),\r\n                    'getHeader': function(header){\r\n                        return self.getResponseHeader(header);\r\n                    },\r\n                    'content': self.response\r\n                }]);\r\n            } else {\r\n                callback(false);\r\n            }\r\n        }\r\n\r\n    } else {\r\n    // Передача нескольких частей файла\r\n        xhr.setRequestHeader('Range', 'bytes=' + (function(){\r\n            ranges.forEach(function(element, index){\r\n                if (ranges[index][0] < 0)\r\n                    ranges[index] = ranges[index][0];\r\n                else\r\n                    ranges[index] = ranges[index][0] + '-' + ranges[index][1];\r\n            });\r\n            return ranges.join(',');\r\n        })());\r\n\r\n        xhr.onreadystatechange = function(){\r\n            if (xhr.readyState !== 4) return false;\r\n            if (xhr.status === 206){\r\n                var self = this;\r\n\r\n                // Разделитель\r\n                var separator = (function(range){\r\n                    var out = range.match(/boundary=(.+)$/);\r\n                    if (out && out[1])\r\n                        return out[1];\r\n                    else\r\n                        return false;\r\n                })(this.getResponseHeader('Content-Type'));\r\n\r\n                // Части\r\n                var parts = get_parts(self.response, separator);\r\n\r\n                callback(parts);\r\n            } else {\r\n                callback(false);\r\n            }\r\n        }\r\n    }\r\n\r\n    xhr.responseType = 'arraybuffer';\r\n    xhr.send(null);\r\n};\r\n\r\n\r\n})(kk);\r\n","kk.get_offset = function(element) {\r\n    var boundingClientRect = element.getBoundingClientRect();\r\n\r\n    // NOTE: Для ie8 может понадобиться полифилл\r\n    return {\r\n        top: boundingClientRect.top + window.pageYOffset,\r\n        left: boundingClientRect.left + window.pageXOffset,\r\n        width: boundingClientRect.width,\r\n        height: boundingClientRect.height\r\n    }\r\n}\r\n","kk.get_window_params = function() {\r\n    var kenzo = kk,\r\n        root = window,\r\n        doc = document,\r\n        doc_elem = doc.documentElement,\r\n        sizes = {};\r\n\r\n    sizes.x = (root.pageXOffset !== kenzo._u) ? root.pageXOffset :\r\n        (doc_elem || doc.body.parentNode || doc.body).scrollLeft;\r\n    sizes.y = (root.pageYOffset !== kenzo._u) ? root.pageYOffset :\r\n        (doc_elem || doc.body.parentNode || doc.body).scrollTop;\r\n\r\n    sizes.w = ('innerWidth' in root) ? root.innerWidth : doc_elem.clientWidth;\r\n    sizes.h = ('innerWidth' in root) ? root.innerHeight : doc_elem.clientHeight;\r\n\r\n    return sizes;\r\n}\r\n","kk.i8to2 = function(int8) {\n    var _ = int8.toString(2);\n    while (_.length < 8) {\n        _ = '0' + _;\n    }\n    return _;\n}\n\nkk.i8ArrayTo2 = function(array) {\n    var _ = '';\n    kk.each (array, function(item) {\n        _ += kk.i8to2(item);\n    });\n    return _;\n}\n\nkk.i8ArrayToString = function(array) {\n    var _ = '';\n    kk.each (array, function(item) {\n        _ += String.fromCharCode(item);\n    });\n    return _;\n}\n","kk.is_nodes = function() {\r\n    var arg = arguments[0];\r\n\r\n    if ((typeof StaticNodeList == kk._o) && (arg instanceof StaticNodeList))\r\n        if (arg.length > 0)\r\n            return true;\r\n        else\r\n            return false;\r\n\r\n    if (arg instanceof kk._NL)\r\n        if (arg.length > 0)\r\n            return true;\r\n        else\r\n            return false;\r\n}\r\n","// Локальное хранилище\r\nkk.ls = (function() {\r\n    var kenzo = kk,\r\n        ls = localStorage,\r\n        ls_get = ls.getItem,\r\n        ls_set = ls.setItem,\r\n        _ = {};\r\n\r\n    _.create = function() {\r\n        kk.each (arguments, function(item) {\r\n            if ((typeof item == kenzo._s) && (!ls_get(item))) {\r\n                ls_set(item, JSON.stringify([]));\r\n                ls_set('@' + item, kenzo.ts());\r\n            }\r\n        })\r\n    }\r\n\r\n    _.get = function(address) {\r\n        return JSON.parse(ls_get(address));\r\n    }\r\n\r\n    _.ts = function(address) {\r\n        return ls_get('@' + address);\r\n    }\r\n\r\n    _.update = function(address, data) {\r\n        ls_set(address, JSON.stringify(data));\r\n        ls_set('@' + address, kenzo.ts());\r\n\r\n        return true;\r\n    }\r\n\r\n    return _;\r\n\r\n})();\r\n","kk.plural = function() {\n    // TODO: Для других языков.\n\n    var kenzo = kk,\n        lang = 'ru',\n        langs = ['ru'],\n        args = arguments,\n        first = args[0],\n        second = args[1],\n        amount, singular, paucal, plural, fr;\n\n    if (typeof first == kenzo._s) {\n        if (langs.indexOf(first) > -1) {\n            lang = first;\n            return true;\n        } else\n            return false;\n    }\n\n    if (typeof first == kenzo._n) {\n        amount = first;\n    } else if (first instanceof kenzo._A) {\n        amount = first.length;\n    } else if (typeof first == kenzo._o) {\n        // NOTE: Может убрать к херам?\n        amount = 0;\n        for (var j in first)\n            amount++;\n    } else\n        return false;\n\n    if (amount < 0)\n        amount = -amount;\n\n    if (\n        (second instanceof kenzo._A) &&\n        (typeof second[0] == kenzo._s) &&\n        (typeof second[1] == kenzo._s) &&\n        (typeof second[2] == kenzo._s)\n    ) {\n        singular = second[0];\n        paucal = second[1];\n        plural = second[2];\n\n    } else if (\n        (typeof args[1] == kenzo._s) &&\n        (typeof args[2] == kenzo._s) &&\n        (typeof args[3] == kenzo._s)\n    ) {\n        kenzo.__d();\n        return kenzo.plural(amount, [args[1], args[2], args[3]]);\n    } else\n        return false;\n\n    (fr = amount.toString().match(/(\\.\\d+)/)) &&\n        (amount *= Math.pow(10, fr[0].length - 1));\n\n    if (fr !== null)\n        return plural;\n    if ((amount % 10 == 1) && (amount % 100 != 11))\n        return singular;\n    else\n        if ((amount % 10 >= 2) && (amount % 10 <= 4) &&\n            ((amount % 100 < 10) || (amount % 100 >= 20)))\n            return paucal;\n        else\n            return plural;\n}\n"],"sourceRoot":"/source/"}